---
description: enforce commenting, docs and db schema for tg-analytics-bot
globs:
  - "**/*.py"
---

- комментируй весь код на русском, кратко и по делу
- веди документацию по архитектуре в docs/architecture.md
- веди документацию структуры бд в docs/schema.md (диаграмма и описания таблиц)
- соблюдай стиль сообщений: plain text без parse_mode, пункты начинаются с тире
- в коммитах упоминай тикет и что изменилось (одна строка)
- используй асинхронные функции для всех операций с внешними API
- обрабатывай все исключения с логированием
- следуй принципам SOLID и чистого кода
- используй типизацию Python для всех функций
- создавай понятные имена переменных и функций на английском
- группируй связанную функциональность в классы
- используй константы для магических чисел и строк
- документируй все публичные методы и классы
- следуй PEP 8 для форматирования кода
- используй logging вместо print для вывода информации
- создавай отдельные модули для разных компонентов системы
- используй переменные окружения для конфигурации
- создавай unit тесты для критической логики
- используй SQLAlchemy или raw SQL с параметризованными запросами
- следуй принципу единственной ответственности для функций
- создавай fallback механизмы для внешних сервисов
- используй кэширование для часто запрашиваемых данных
- следуй принципу fail-fast для валидации входных данных
- создавай метрики и мониторинг для отслеживания производительности